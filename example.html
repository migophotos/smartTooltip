<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <script src="smarttooltip.js"></script>
    <style>
        .container { 
          width: 80%; 
          margin: 0 auto; 
        }
        .grid-container {
            display: grid; 
            grid-template-columns: 1fr 1fr; 
        }
        p { 
            font-size: 18px; 
            line-height: 2.0;
            padding-bottom: 27px; 
        }
        text {
            font-size: 18pt;
            text-shadow: #4A4A4A 1px 1px 8px; 
        }
        .label-red {
            cursor: pointer;
            background-color: red;
        }
        .label-green {
            cursor: pointer;
            background-color: rgb(19, 233, 19);
        }
    </style>

</head>

<body>

<div class="container">
    <h2>How to effectively use SmartTooltip<br>(I highly recommend that you read this paragraph, and practice in managing this smart widget)!</h2>

    <p>Move the cursor over the word "<b><label id="l1" class="sttip-link">accumsan</label></b>". You will see a pop-up window containing the title with value, some description and value colored indicator.
        If you stupidly sit and look at the hint, it will go out after a few seconds. Alas, nothing lasts forever under the moon ... :)</p>

    <p>The tooltip window "<b><label id="l2" class="sttip-link">crawls</label></b>" behind the mouse pointer, but it can be fixed. To do this, press the Ctrl key on the keyboard and move the mouse.
        In the left, upper corner of the tooltip window is a blue circle. This is the "pinMe" button. If you press it, the tooltip will be "pinned" to any
        subsequent element on which you move the mouse pointer.</p>
    <p>Try clicking on the "pinMe" button and move the mouse pointer to the word "Diam" written in red ...
        Look at how the behavior of the tooltip window changed - now it does not crawl, but jumps! And It remembers its condition even after the page is reloaded.</p>

    <p>Now point the mouse at the word "Integer", located near the word "accumsan". It is possible that a pop-up tooltip window will close it. This is because the
        window is trying to fit on the screen and ... well, in general - I'll fix it someday. What can be done now? <br>There is one secret:
        The tooltip window can be moved with the mouse to any place on the screen! <br>Just click anywhere in the free gray box and drag. Just drag and drop!
        Once you stop moving the window, it will remember its coordinates and will not crawl and jump anywhere else. Simply will constantly hang on the screen and display
         tips when you hover over the hot pies. You can move the window anyplace else at any time, it does not care. It will remember the new coordinates until you press
         the "pinMe" button again and it will again be pierced. :)</p>
         <p>By the way, did you notice that at the pinned window the color of this button becomes almost black?
         It can be changed in styles. I will write the full documentation when I finish fixing the bugs.</p>

         <p>Quisque tempor <label id="l5" class="label-red">diam</label> sit amet vulputate porttitor.
            auctor nisi in erat viverra, a consectetur enim egestas. Quisque ut
            massa pharetra, posuere tortor in, viverra ipsum. Donec consectetur
            quam in tempor tincidunt. Nulla mauris tortor, ornare ac porttitor
            non, maximus nec eros. Cras ac tincidunt ligula, in dapibus urna.
            Nullam sed cursus est, ac euismod nibh. Duis ut mi ligula. Cras sed
            feugiat ipsum. Nunc laoreet ante sed laoreet egestas.</p>

            <h3>Fusce eget condimentum eros.</h3>
         <p>In quis <label id="l6" class="label-green">enim</label> <label ><b id="l7" class="sttip-link">accumsan</b></label>, <label id="l8" class="label-green">sollicitudin</label> sem id, gravida ipsum. Fusce <label id="l9" class="label-green">suscipit</label> <label ><b id="l10" class="sttip-link">accumsan</b></label> massa.
         Morbi vitae elementum lacus. Cras imperdiet urna vitae luctus laoreet. Vivamus venenatis
         porttitor tincidunt. Donec volutpat <label id="l12" class="label-green">rutrum</label> faucibus. Nullam et <label ><b id="l14" class="sttip-link">accumsan</b></label> ante, vitae egestas
          arcu. Vivamus blandit arcu eget augue bibendum, sed imperdiet orci auctor. Mauris aliquet
          hendrerit suscipit. Aenean <label id="l15" class="label-green">ut</label> pulvinar diam, nec sagittis diam. Duis at gravida lacus,
          nec convallis erat. Etiam sit amet <label id="l16" class="label-green">quam</label>. Nulla facilisi.</p>
     

</div>
        <script>
            var val2color = function(val) {
                var color;
                if (val < 25)
                    color = "green";
                else if (val < 50)
                    color = "blue";
                else if (val < 75)
                    color = "yellow";
                else
                    color = "red";
                return color;
            }
            var smallVal2color = function(val) {
                var color;
                if (val < 5)
                    color = "green";
                else if (val < 7)
                    color = "blue";
                else if (val < 8)
                    color = "yellow";
                else
                    color = "red";
                return color;
            }
            var item;
            var els = document.getElementsByClassName('sttip-link');
            for (item of els) {
                item.addEventListener('mouseover', function(evt) {
                    var val = Math.floor(Math.random() * (100 - 0 + 1)) + 0;
                     
                    var cr = val2color(val);
                    let valueMax = null;
                    if (evt.target.id === 'l1')
                        val = val * 100;
                    if (evt.target.id === 'l2') {
                        val = val * 150;
                        valueMax = 15000;
                    }

                    SmartTooltip.showTooltip({
                        id: evt.target.id,
                        x: evt.clientX,
                        y: evt.clientY,
                        options: {
                            tRect: evt.target.getBoundingClientRect()
                            , cssVars: {
                                "--smartTip-frame-fill": "#000",
                                "--smartTip-font-color": "#fff",
                                "--smartTip-legend-fill":"#000",
                                "--smartTip-border-radius": "10"
                            }
                            , scale: 0.8
                        },
                        title: {
                            uuid: `uuid-${evt.target.id}`,
                            name: `${evt.target.textContent}`,
                            descr: 'Click on the indicator at the bottom (Ctrl + mouse)',
                            value: val,
                            valueMax: valueMax,
                            color: cr,
                            link: `https://www.google.com/search?q=${evt.target.textContent}`,

                            titleFormat: '$NAME$=$VALUE$... What is it? Maybe Google knows ... ',
                            descrFormat: '$DESCR$'
                        }
                    }, evt);
                });
                item.addEventListener('mousemove', function(evt) {
                    SmartTooltip.moveTooltip(evt.clientX, evt.clientY, evt);
                });
                item.addEventListener('mouseout', function(evt) {
                    SmartTooltip.hideTooltip(evt);
                });
            }

            els = document.getElementsByClassName('label-red');
            for (item of els) {
                item.addEventListener('mouseover', function(evt) {
                    var greenEls = document.getElementsByClassName('label-green');
                    var data = {
                        id: evt.target.id,
                        x: evt.clientX,
                        y: evt.clientY,
                        options: { tRect: evt.target.getBoundingClientRect() },
                        title: {
                            uuid: `uuid-${evt.target.id}`,
                            name: `Number of words on a green background - ${greenEls.length}`,
                            descr: 'The pie shows the number of letters in each word',
                            color: 'red',
                            link: `https://www.google.com/search?q=${evt.target.textContent}`,
                            value: greenEls.length,
                            descrFormat: '$DESCR$'
                        },
                        targets: []
                    };
                    for (var subItem of greenEls) {
                        //subItem.setAttribute('id', subItem.textContent);
                        var subTarget = {
                            uuid: `uuid-${subItem.id}`,
                            name: subItem.textContent,
                            color: smallVal2color(subItem.textContent.length),
                            value: subItem.textContent.length,
                            link: (subItem.textContent === 'suscipit' ? "http://www.google.com/search?q=suscipit" : '')
                        }
                        data.targets.push(subTarget);
                    }
                    SmartTooltip.showTooltip(data, evt);
                });
                item.addEventListener('mousemove', function(evt) {
                    SmartTooltip.moveTooltip(evt.clientX, evt.clientY, evt);
                });
                item.addEventListener('mouseout', function(evt) {
                    SmartTooltip.hideTooltip(evt);
                });
            }
        </script>
</body>

</html>

